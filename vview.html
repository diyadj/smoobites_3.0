<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Basic -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <!-- Site Metas -->
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />

    <title>Delfood</title>

    <!-- bootstrap core css -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />

    <!-- fonts style -->
    <link href="https://fonts.googleapis.com/css?family=Poppins:400,600,700&display=swap" rel="stylesheet">

    <!-- font awesome style -->
    <link href="css/font-awesome.min.css" rel="stylesheet" />

    <!-- nice select -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/css/nice-select.min.css"
        integrity="sha256-mLBIhmBvigTFWPSCtvdu6a76T+3Xyt+K571hupeFLg4=" crossorigin="anonymous" />

    <!-- slick slider -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.css"
        integrity="sha256-UK1EiopXIL+KVhfbFa8xrmAWPeBjMVdvYMYkTAEv/HI=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick-theme.min.css"
        crossorigin="anonymous" />

    <!-- Custom styles for this template -->
    <link href="css/style.css" rel="stylesheet" />
    <!-- responsive style -->
    <link href="css/responsive.css" rel="stylesheet" />

    <!-- DataTables CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.css">

    <style>
        .food-details-box {
            padding: 30px;
            background: #fff;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2), 0 12px 24px rgba(0, 0, 0, 0.2); /* Enhanced shadow */
            border-radius: 10px;
            height: 600px;
        }

        .food-image {
            width: 100%; /* Full width */
            height: auto; /* Maintain aspect ratio */
            border-radius: 10px;
            object-fit: cover;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .food-content {
            flex: 1; /* Make content fill remaining space */
            padding-left: 20px; /* Add space between image and content */
        }

        .food-title {
            font-size: 3em;
            font-weight: 500;
            margin-top: 20px;
        }

        .food-description {
            font-size: 1.2em;
            margin-top: 10px;
        }

        .food-price {
            font-size: 1.1em;
            font-weight: 600;
            color: #ff6347; /* Custom color for the price */
            display: inline; /* Keep price on the same line as its label */
        }

        .food-price-label {
            font-size: 1.1em;
            font-weight: 600;
            margin-right: 10px;
            display: inline; /* Keep price label on the same line as the price */
        }

        .food-prep-time {
            font-size: 1.1em;
            font-weight: 600;
            color: #4682b4; /* Custom color for the preparation time */
            display: inline; /* Keep prep time on the same line as its label */
        }

        .food-prep-time-label {
            font-size: 1.1em;
            font-weight: 600;
            margin-right: 10px;
            display: inline; /* Keep prep time label on the same line as the prep time */
        }

        .food-addons-label {
            font-size: 1.1em;
            font-weight: 600;
            margin-top: 15px;
            text-align: left; /* Align text to the left */
        }

        .food-addons {
            max-height: 150px; /* Limit the height */
            overflow-y: auto; /* Enable vertical scroll */
            border: 1px solid #d3d3d3; /* Border for the box */
            border-radius: 5px;
            padding: 10px;
            margin-top: 5px; /* Space between label and box */
        }

        .food-addons span {
            display: flex; /* Display add-on name and price on the same line */
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px; /* Space between add-ons */
            padding: 5px;
            background: #f8f8f8;
            border-radius: 5px;
        }

        .addon-price {
            color: #ff6347; /* Custom color for the addon price */
            font-weight: 600;
        }

        .vertical-line {
            border-left: 2px solid #d3d3d3; /* Softer grey */
            height: 100%;
            margin: 0 20px;
        }

        .User_option {
      position: relative;
      display: inline-block;
    }

    .User_option .dropdown-content {
      display: none;
      position: absolute;
      background-color: white;
      min-width: 160px;
      box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
      z-index: 1;
    }

    .User_option:hover .dropdown-content {
      display: block;
    }

    .dropdown-content a {
      color: black;
      padding: 12px 16px;
      text-decoration: none;
      display: block;
    }

    .dropdown-content a:hover {
      background-color: #ddd;
    }
    </style>
</head>

<body class="sub_page">

    <div class="hero_area">
        <!-- header section starts -->
        <header class="header_section">
            <div class="container-fluid">
                <nav class="navbar navbar-expand-lg custom_nav-container">
                    <a class="navbar-brand" href="index.html">
                        <span>
                            Smoobites
                        </span>
                    </a>
                    <div class="" id="">
                        <div class="User_option">
                            <i class="fa fa-user" aria-hidden="true"></i>
                            <span id="user-greeting"><a href="login.html" role="button">Login</a></span>
                            <div class="dropdown-content">
                              <a href="#" id="logout-button">Logout</a>
                            </div>
                          </div>
                        <div class="custom_menu-btn">
                            <button onclick="openNav()">
                                <img src="images/menu.png" alt="">
                            </button>
                        </div>
                        <div id="myNav" class="overlay">
                            <div class="overlay-content">
                                <a href="index.html">Home</a>
                                <a href="about.html">About</a>
                                <a href="blog.html">Blog</a>
                                <a href="testimonial.html">Testimonial</a>
                            </div>
                        </div>
                    </div>
                </nav>
            </div>
        </header>
        <!-- end header section -->
    </div>

    <!-- about section -->
    <section class="about_section layout_padding">
        <div class="container">
            <div class="box" style="padding-top: 50px;">
                <div class="food-details-box">
                    <div class="row">
                        <div class="col-md-5">
                            <img src="" alt="Food Image" class="food-image" id="foodImage">
                        </div>
                        <div class="col-md-1">
                            <div class="vertical-line"></div>
                        </div>
                        <div class="col-md-6">
                            <h2 class="food-title" id="foodName">Food Name</h2>
                            <p class="food-description" id="foodDescription">This is a delicious food item that you will love.</p>
                            <p>
                                <span class="food-prep-time-label">Preparation Time:</span> 
                                <span class="food-prep-time" id="foodPrepTime">0 mins</span>
                                <span class="food-price-label"> | Price:</span> 
                                <span class="food-price" id="foodPrice">$0.00</span>
                            </p>
                            <div class="food-addons-label">Add-ons:</div>
                            <div class="food-addons" id="foodAddons">None</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- end about section -->

    <div class="footer_container">
        <!-- info section -->
        <section class="info_section">
            <div class="container">
                <div class="contact_box">
                    <a href="">
                        <i class="fa fa-map-marker" aria-hidden="true"></i>
                    </a>
                    <a href="">
                        <i class="fa fa-phone" aria-hidden="true"></i>
                    </a>
                    <a href="">
                        <i class="fa fa-envelope" aria-hidden="true"></i>
                    </a>
                </div>
                <div class="info_links">
                    <ul>
                        <li class="active">
                            <a href="index.html">
                                Home
                            </a>
                        </li>
                        <li>
                            <a href="about.html">
                                About
                            </a>
                        </li>
                        <li>
                            <a class="" href="blog.html">
                                Blog
                            </a>
                        </li>
                        <li>
                            <a class="" href="review.html">
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="social_box">
                    <a href="">
                        <i class="fa fa-facebook" aria-hidden="true"></i>
                    </a>
                    <a href="">
                        <i class="fa fa-twitter" aria-hidden="true"></i>
                    </a>
                    <a href="">
                        <i class="fa fa-linkedin" aria-hidden="true"></i>
                    </a>
                </div>
            </div>
        </section>
        <!-- end info_section -->
        <div style="padding-bottom: 30px;"></div>
        <!-- footer section -->
        <footer class="footer_section">
            <div class="container">
                <p>
                    &copy; <span id="displayYear"></span> All Rights Reserved By
                    SMU Smoobites Heaps <br>
                </p>
            </div>
        </footer>
        <!-- footer section -->
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" crossorigin="anonymous"></script>
    <!-- bootstrap js -->
    <script src="js/bootstrap.js"></script>
    <!-- slick slider -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.js"></script>
    <!-- nice select -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/js/jquery.nice-select.min.js"
        integrity="sha256-Zr3vByTlMGQhvMfgkQ5BtWRSKBGa2QlspKYJnkjZTmo=" crossorigin="anonymous"></script>
    <!-- DataTables JS -->
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.js"></script>
    <!-- Custom JS -->
    <script src="js/custom.js"></script>

    <!-- Inline jQuery -->
    <script>
        $(document).ready(function () {
            // Fetch food details and update the DOM
            $.ajax({
                url: '/get-food-details', // Updated endpoint
                method: 'GET',
                success: function (data) {
                    console.log("Data received:", data); // Log data for debugging
    
                    // Replace backslashes with forward slashes in the image path
                    var imagePath = data.image_path.replace(/\\/g, '/');
    
                    // Update the DOM with the data received
                    $('#foodImage').attr('src', `go/${imagePath}`);
                    $('#foodImage').attr('alt', data.food_name); // Optional: Set the alt attribute for the image
                    $('#foodName').text(data.food_name);
                    $('#foodDescription').text(data.description);
                    $('#foodPrice').text('$' + data.price.toFixed(2));
                    $('#foodPrepTime').text(data.prep_time + ' mins');
                    $('#foodAddons').html(data.addons.map(addon => `<span>${addon.name} <span class="addon-price">$${addon.price.toFixed(2)}</span></span>`).join(' '));
                },
                error: function (error) {
                    console.log("Error:", error);
                }
            });
    
            // Fetch session info and update the login/logout state
            fetch('/session-info')
                .then(response => response.json())
                .then(data => {
                    const userGreeting = document.getElementById('user-greeting');
                    const logoutButton = document.getElementById('logout-button');
    
                    if (data.user) {
                        userGreeting.innerHTML = `Hi ${data.user} (${data.role})!`;
                        logoutButton.style.display = 'block';
                    } else {
                        userGreeting.innerHTML = '<a href="login.html" role="button">Login</a>';
                        logoutButton.style.display = 'none';
                    }
                });
    
            // Handle logout button click
            document.getElementById('logout-button').addEventListener('click', function () {
                fetch('/logout')
                    .then(response => response.json())
                    .then(data => {
                        if (data.status === 'logged out') {
                            const userGreeting = document.getElementById('user-greeting');
                            const logoutButton = document.getElementById('logout-button');
                            userGreeting.innerHTML = '<a href="login.html" role="button">Login</a>';
                            logoutButton.style.display = 'none';
                        }
                    });
            });
        });
    </script>
    
</body>

</html>
